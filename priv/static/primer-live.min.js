"use strict";(()=>{var h={mounted(){window.addEventListener("phx:pl-session",e=>fetch(`/api/pl-session?payload=${JSON.stringify(e.detail)}`,{method:"post"}))}};window.Theme=h;var r="[data-prompt]",T="[data-prompt-content]",l="[data-content]",M="[data-touch]",m='input[type="checkbox"]',L="label",y="ismounted",H="touch",g="ismodal",b="isescapable",w="focusfirst",p=e=>(e==null?void 0:e.dataset[H])!==void 0,f=e=>(e==null?void 0:e.dataset[g])!==void 0,P=e=>(e==null?void 0:e.dataset[b])!==void 0;function S(e){let n=e==null?void 0:e.closest(r);if(!n)return null;let t=n.querySelector(m);return t||null}function a(e){let n=null;if(typeof e=="string"){let t=document.querySelector(e);t&&(n=t.querySelector(m))}else n=S(e);return n}function k(e){let n=e.closest(r);if(!n)throw new Error(`Prompt element ${r} not found`);let t=(n==null?void 0:n.querySelector(T))||null;if(!t)throw new Error("Prompt element 'data-prompt-content' not found");let o=t==null?void 0:t.querySelector(l);if(!o)throw new Error(`Prompt element ${l} not found`);let i=(t==null?void 0:t.querySelector(M))||null,s=(n==null?void 0:n.querySelector(L))||null;return{root:n,touchLayer:i,content:o,toggle:s}}function u({checkbox:e,state:n,elements:t,options:o,onDidShow:i}){switch(e.dataset[y]="true",n){case"showing":delete e.dataset.ishiding,o.willShow&&o.willShow(t);break;case"endShowing":i&&i(t),o.didShow&&o.didShow(t);break;case"hiding":e.checked=!1,e.dataset.ishiding="true",o.willHide&&o.willHide(t);break;case"endHiding":delete e.dataset.ishiding,o.didHide&&o.didHide(t);break;default:break}}function E(e){var o;if(!e.target)return;let n=e.target;if(n&&n instanceof HTMLElement&&!p(n))return;let t=n.closest(r);t&&t instanceof HTMLElement&&f(t)||(o=a(n))==null||o.click()}function C(e){if(e.key==="Escape"){let t=Array.from(document.querySelectorAll(`${r} > ${m}:checked`)).reverse()[0];if(t instanceof HTMLElement){let o=t.closest(r);P(o)&&t.click()}}}function v({root:e}){let n=e.querySelector(l);n&&x(e,n)}function x(e,n){let t=e.dataset[w];if(t){let o=n.querySelector(t);o&&o.focus()}}function c(e,n,t){let o=a(e);if(o){if(o.checked&&n==="show"||!o.checked&&n==="hide")return;t&&(o.options=t),o.click()}}var d={isInited:!1,init:function(){d.isInited||(window.addEventListener("keydown",C),d.isInited=!0)},mounted:function(){this.init()},updated:function(){this.init()},change:function(e,n={}){var i,s;let t=a(e);if(!t||!(t instanceof HTMLInputElement))return;let o=k(t);t.checked?(i=o.touchLayer)==null||i.addEventListener("click",E):(s=o.touchLayer)==null||s.removeEventListener("click",E),t.addEventListener("transitionend",function(O){u({checkbox:t,state:t.checked?"endShowing":"endHiding",elements:o,options:n,onDidShow:v})},{once:!0}),u({checkbox:t,state:t.checked?"showing":"hiding",elements:o,options:n})},hide:function(e){if(typeof e!="string"){let n=e,t=n.closest(r);if(p(n)&&f(t))return}c(e,"hide")},show:function(e){c(e,"show")},toggle:function(e){c(e,"toggle")}};typeof window<"u"&&(window.Prompt=d);})();
