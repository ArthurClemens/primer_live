"use strict";(()=>{var s={mounted(){let o=this.el,c=o.querySelector("[data-content]");if(!(c instanceof HTMLElement)){console.error("Missing element with attribute [data-content]");return}let l=(e,r)=>{var a;(a=this.pushEventTo)==null||a.call(this,e,"primer_live:prompt",{elementId:o.id,selector:e,status:r})},t=(e,r)=>a=>{let i=a.detail.selector;if(!i){console.error("Missing status_callback_selector");return}c.addEventListener("transitionstart",function(n){l(i,e)},{once:!0}),c.addEventListener("transitionend",function(n){l(i,r)},{once:!0})};this.handlePromptToggle=e=>{var a;let r=o.classList.contains("is-open")?o.dataset.close:o.dataset.open;r?(a=this.liveSocket)==null||a.execJS(o,r):console.error("No command found in element dataset")},this.handlePromptOpen=t("opening","opened"),o.addEventListener("prompt:open",this.handlePromptOpen),this.handlePromptClose=t("closing","closed"),o.addEventListener("prompt:close",this.handlePromptClose),o.addEventListener("prompt:toggle",this.handlePromptToggle)},destroyed(){this.el&&(this.handlePromptOpen&&this.el.removeEventListener("prompt:open",this.handlePromptOpen),this.handlePromptClose&&this.el.removeEventListener("prompt:close",this.handlePromptClose),this.handlePromptToggle&&this.el.removeEventListener("prompt:toggle",this.handlePromptToggle))}};typeof window<"u"&&(window.Prompt=s);window.addEventListener("keydown",d);function d(o){if(o.key==="Escape"){let c=Array.from(document.querySelectorAll("[data-prompt].is-open")).filter(t=>t.dataset.isescapable!==void 0),l=c.reverse()[0];if(!(l instanceof HTMLElement))return;c.forEach(t=>{let e=t.querySelector("[data-focuswrap]");if(e instanceof HTMLElement){let r=t==l?"Escape":"Escape_disabled";e.setAttribute("phx-key",r)}})}}})();
