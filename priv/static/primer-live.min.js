"use strict";(()=>{var c="[data-prompt]",u="[data-prompt-content]",d="[data-content]",x="[data-touch]",b='input[type="checkbox"]',v="label",k="ismounted",y="touch",w="ismodal",z="isescapable",$="focusfirst",m=o=>(o==null?void 0:o.dataset[y])!==void 0,h=o=>(o==null?void 0:o.dataset[w])!==void 0,S=o=>(o==null?void 0:o.dataset[z])!==void 0;function C(o){let r=o==null?void 0:o.closest(c);if(!r)return null;let e=r.querySelector(b);return e||null}function l(o){let r=null;if(typeof o=="string"){let e=document.querySelector(o);e&&(r=e.querySelector(b))}else r=C(o);return r}function L(o){let r=o.closest(c);if(!r)throw new Error("Prompt element ".concat(c," not found"));let e=(r==null?void 0:r.querySelector(u))||null;if(!e)throw new Error("Prompt element 'data-prompt-content' not found");let t=e==null?void 0:e.querySelector(d);if(!t)throw new Error("Prompt element ".concat(d," not found"));let a=(e==null?void 0:e.querySelector(x))||null,i=(r==null?void 0:r.querySelector(v))||null;return{root:r,touchLayer:a,content:t,toggle:i}}function g({checkbox:o,state:r,elements:e,options:t,onDidShow:a}){switch(r){case"showing":delete o.dataset.ishiding,t.willShow&&t.willShow(e);break;case"endShowing":a&&a(e),t.didShow&&t.didShow(e);break;case"hiding":o.checked=!1,o.dataset.ishiding="true",t.willHide&&t.willHide(e);break;case"endHiding":delete o.dataset.ishiding,t.didHide&&t.didHide(e);break;default:break}}function p(o){var t;if(!o.target)return;let r=o.target;if(r&&r instanceof HTMLElement&&!m(r))return;let e=r.closest(c);e&&e instanceof HTMLElement&&h(e)||(t=l(r))==null||t.click()}function A(o){if(o.key==="Escape"){let e=Array.from(document.querySelectorAll("".concat(c," > ").concat(b,":checked"))).reverse()[0];if(e instanceof HTMLElement){let t=e.closest(c);S(t)&&e.click()}}}function F({root:o}){let r=o.querySelector(d);r&&M(o,r)}function M(o,r){let e=o.dataset[$];if(e){let t=r.querySelector(e);t&&t.focus()}}function s(o,r,e){let t=l(o);if(t){if(t.checked&&r==="show"||!t.checked&&r==="hide")return;e&&(t.options=e),t.click()}}function f(o){let r=o.target;if(!(r instanceof HTMLElement))return;let e=l(r);if(!e||!(e instanceof HTMLInputElement))return;let t={show:n.show,hide:n.hide},a=o.detail.action;a&&setTimeout(()=>{t[a](r)},0)}var n={isInited:!1,init:function(o){if(this.el&&o&&(window.addEventListener("keydown",A),this.el.addEventListener("prompt:toggle",f),n.isInited=!0),this.el){let r=l(this.el);r&&(r.dataset[k]="true")}},mounted:function(){this.init(!0)},updated:function(){this.init()},destroyed:function(){var o;(o=this.el)==null||o.removeEventListener("prompt:toggle",f)},change:function(o,r={}){var a,i;let e=l(o);if(!e||!(e instanceof HTMLInputElement))return;let t=L(e);e.checked?(a=t.touchLayer)==null||a.addEventListener("click",p):(i=t.touchLayer)==null||i.removeEventListener("click",p),e.addEventListener("transitionend",function(j){g({checkbox:e,state:e.checked?"endShowing":"endHiding",elements:t,options:r,onDidShow:F})},{once:!0}),g({checkbox:e,state:e.checked?"showing":"hiding",elements:t,options:r})},hide:function(o){if(typeof o!="string"){let r=o,e=r.closest(c);if(m(r)&&h(e))return}s(o,"hide")},show:function(o){s(o,"show")},toggle:function(o){s(o,"toggle")}};typeof window<"u"&&(window.Prompt=n);})();
