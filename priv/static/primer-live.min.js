"use strict";(()=>{var c="[data-prompt]",u="[data-prompt-content]",d="[data-content]",x="[data-touch]",b='input[type="checkbox"]',v="label",k="ismounted",y="touch",w="ismodal",z="isescapable",$="isshowonmount",S="focusfirst",h=o=>(o==null?void 0:o.dataset[y])!==void 0,g=o=>(o==null?void 0:o.dataset[w])!==void 0,C=o=>!g(o)||(o==null?void 0:o.dataset[z])!==void 0,L=o=>(o==null?void 0:o.dataset[$])!==void 0;function A(o){let r=o==null?void 0:o.closest(c);if(!r)return null;let e=r.querySelector(b);return e||null}function l(o){let r=null;if(typeof o=="string"){let e=document.querySelector(o);e&&(r=e.querySelector(b))}else r=A(o);return r}function F(o){let r=o.closest(c);if(!r)throw new Error("Prompt element ".concat(c," not found"));let e=(r==null?void 0:r.querySelector(u))||null;if(!e)throw new Error("Prompt element 'data-prompt-content' not found");let t=e==null?void 0:e.querySelector(d);if(!t)throw new Error("Prompt element ".concat(d," not found"));let a=(e==null?void 0:e.querySelector(x))||null,n=(r==null?void 0:r.querySelector(v))||null;return{root:r,touchLayer:a,content:t,toggle:n}}function p({checkbox:o,state:r,elements:e,options:t,onDidShow:a}){switch(r){case"showing":delete o.dataset.ishiding,t.willShow&&t.willShow(e);break;case"endShowing":a&&a(e),t.didShow&&t.didShow(e);break;case"hiding":o.checked=!1,o.dataset.ishiding="true",t.willHide&&t.willHide(e);break;case"endHiding":delete o.dataset.ishiding,t.didHide&&t.didHide(e);break;default:break}}function f(o){var t;if(!o.target)return;let r=o.target;if(r&&r instanceof HTMLElement&&!h(r))return;let e=r.closest(c);e&&e instanceof HTMLElement&&g(e)||(t=l(r))==null||t.click()}function M(o){if(o.key==="Escape"){let e=Array.from(document.querySelectorAll("".concat(c," > ").concat(b,":checked"))).reverse()[0];if(e instanceof HTMLElement){let t=e.closest(c);C(t)&&e.click()}}}function j({root:o}){let r=o.querySelector(d);r&&I(o,r)}function I(o,r){let e=o.dataset[S];if(e){let t=r.querySelector(e);t&&t.focus()}}function s(o,r,e){let t=l(o);if(t){if(t.checked&&r==="show"||!t.checked&&r==="hide")return;e&&(t.options=e),t.click()}}function m(o){let r=o.target;if(!(r instanceof HTMLElement))return;let e=l(r);if(!e||!(e instanceof HTMLInputElement))return;let t={show:i.show,hide:i.hide},a=o.detail.action;a&&setTimeout(()=>{t[a](r)},0)}var i={isInited:!1,init:function(o){if(!this.el)return;let r=l(this.el);r&&(r.dataset[k]="true"),o&&(window.addEventListener("keydown",M),this.el.addEventListener("prompt:toggle",m),L(this.el)&&i.show(this.el),i.isInited=!0)},mounted:function(){this.init(!0)},updated:function(){this.init()},destroyed:function(){var o;(o=this.el)==null||o.removeEventListener("prompt:toggle",m)},change:function(o,r={}){var a,n;let e=l(o);if(!e||!(e instanceof HTMLInputElement))return;let t=F(e);e.checked?(a=t.touchLayer)==null||a.addEventListener("click",f):(n=t.touchLayer)==null||n.removeEventListener("click",f),e.addEventListener("transitionend",function(R){p({checkbox:e,state:e.checked?"endShowing":"endHiding",elements:t,options:r,onDidShow:j})},{once:!0}),p({checkbox:e,state:e.checked?"showing":"hiding",elements:t,options:r})},hide:function(o){if(typeof o!="string"){let r=o,e=r.closest(c);if(h(r)&&g(e))return}s(o,"hide")},show:function(o){s(o,"show")},toggle:function(o){s(o,"toggle")}};typeof window<"u"&&(window.Prompt=i);})();
