"use strict";(()=>{var T={mounted(){window.addEventListener("phx:pl-session",e=>fetch(`/api/pl-session?payload=${JSON.stringify(e.detail)}`,{method:"post"}))}};window.Session=T;var s="[data-prompt]",M="[data-prompt-content]",l="[data-content]",L="[data-touch]",m='input[type="checkbox"]',y="label",H="ismounted",g="touch",b="ismodal",S="isescapable",w="focusfirst",f=e=>(e==null?void 0:e.dataset[g])!==void 0,p=e=>(e==null?void 0:e.dataset[b])!==void 0,P=e=>(e==null?void 0:e.dataset[S])!==void 0;function h(e){let n=e==null?void 0:e.closest(s);if(!n)return null;let t=n.querySelector(m);return t||null}function a(e){let n=null;if(typeof e=="string"){let t=document.querySelector(e);t&&(n=t.querySelector(m))}else n=h(e);return n}function k(e){let n=e.closest(s);if(!n)throw new Error(`Prompt element ${s} not found`);let t=(n==null?void 0:n.querySelector(M))||null;if(!t)throw new Error("Prompt element 'data-prompt-content' not found");let o=t==null?void 0:t.querySelector(l);if(!o)throw new Error(`Prompt element ${l} not found`);let i=(t==null?void 0:t.querySelector(L))||null,r=(n==null?void 0:n.querySelector(y))||null;return{root:n,touchLayer:i,content:o,toggle:r}}function u({checkbox:e,state:n,elements:t,options:o,onDidShow:i}){switch(n){case"showing":delete e.dataset.ishiding,o.willShow&&o.willShow(t);break;case"endShowing":i&&i(t),o.didShow&&o.didShow(t);break;case"hiding":e.checked=!1,e.dataset.ishiding="true",o.willHide&&o.willHide(t);break;case"endHiding":delete e.dataset.ishiding,o.didHide&&o.didHide(t);break;default:break}}function E(e){var o;if(!e.target)return;let n=e.target;if(n&&n instanceof HTMLElement&&!f(n))return;let t=n.closest(s);t&&t instanceof HTMLElement&&p(t)||(o=a(n))==null||o.click()}function C(e){if(e.key==="Escape"){let t=Array.from(document.querySelectorAll(`${s} > ${m}:checked`)).reverse()[0];if(t instanceof HTMLElement){let o=t.closest(s);P(o)&&t.click()}}}function x({root:e}){let n=e.querySelector(l);n&&v(e,n)}function v(e,n){let t=e.dataset[w];if(t){let o=n.querySelector(t);o&&o.focus()}}function c(e,n,t){let o=a(e);if(o){if(o.checked&&n==="show"||!o.checked&&n==="hide")return;t&&(o.options=t),o.click()}}var d={isInited:!1,init:function(){let e=h(this.el||void 0);e&&(e.dataset[H]="true"),d.isInited||(window.addEventListener("keydown",C),d.isInited=!0)},mounted:function(){this.init()},updated:function(){this.init()},change:function(e,n={}){var i,r;let t=a(e);if(!t||!(t instanceof HTMLInputElement))return;let o=k(t);t.checked?(i=o.touchLayer)==null||i.addEventListener("click",E):(r=o.touchLayer)==null||r.removeEventListener("click",E),t.addEventListener("transitionend",function(O){u({checkbox:t,state:t.checked?"endShowing":"endHiding",elements:o,options:n,onDidShow:x})},{once:!0}),u({checkbox:t,state:t.checked?"showing":"hiding",elements:o,options:n})},hide:function(e){if(typeof e!="string"){let n=e,t=n.closest(s);if(f(n)&&p(t))return}c(e,"hide")},show:function(e){c(e,"show")},toggle:function(e){c(e,"toggle")}};typeof window<"u"&&(window.Prompt=d);})();
