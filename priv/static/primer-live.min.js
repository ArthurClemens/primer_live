"use strict";(()=>{var P=Object.defineProperty,O=Object.defineProperties;var B=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var A=(o,e,r)=>e in o?P(o,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[e]=r,g=(o,e)=>{for(var r in e||(e={}))T.call(e,r)&&A(o,r,e[r]);if(C)for(var r of C(e))W.call(e,r)&&A(o,r,e[r]);return o},h=(o,e)=>O(o,B(e));var R=o=>new Promise(e=>setTimeout(e,o)),D=(o,e)=>e.reduce((r,a)=>r!=="0s"?r:o.getPropertyValue(a),"0s"),F=({domElement:o,props:e})=>{let r=document.defaultView;if(r){let a=r.getComputedStyle(o);if(a)return D(a,e)}},I=o=>{let e=parseFloat(o)*(o.indexOf("ms")===-1?1e3:1);return Number.isNaN(e)?0:e},N=o=>{let e=F({domElement:o,props:["animation-duration","transition-duration"]}),r=e!==void 0?I(e):0,a=F({domElement:o,props:["animation-delay","transition-delay"]}),t=a!==void 0?I(a):0;return r+t},y=o=>o.scrollTop,E=o=>{let e=typeof window<"u"?window.getComputedStyle(o):{};return e.opacity==="0"||e.display==="none"?!1:!!(o.offsetWidth||o.offsetHeight||o.getClientRects().length)},G=(o,e)=>o instanceof HTMLAnchorElement&&o.rel!=="ignore"||o instanceof HTMLAreaElement&&o.href!==void 0||[HTMLInputElement,HTMLSelectElement,HTMLTextAreaElement,HTMLButtonElement].some(r=>o instanceof r)&&!o.disabled||o instanceof HTMLIFrameElement||o.tabIndex>0||!e&&o.tabIndex===0&&o.getAttribute("tabindex")!==null&&o.getAttribute("aria-hidden")!=="true",_=o=>[].slice.call(o.querySelectorAll("button, [href], input, select, textarea, [tabindex]:not([tabindex='-1'])")).filter(r=>G(r,!0)).sort((r,a)=>r.tabIndex-a.tabIndex)[0],Z=(o,e,r)=>{e&&(o[e]||(o[e]=JSON.stringify(r)))},U=(o,e)=>{if(e)return JSON.parse(o[e])},j=(o,e)=>{e&&delete o[e]},H=(o,e)=>{!e||!o||Object.keys(o).forEach(r=>{e.dataset[r]=o[r]})},M="[data-prompt]",Y="[data-content]",V="[data-touch]",X="[data-backdrop]",Q="[data-toggle]",J="ismodal",q="isescapable",K="isfocusfirst",oo="focusfirst",L="isopen",k="islocked",eo=300,x={isOpen:!1,willShow:!1,didShow:!1,willHide:!1,didHide:!1},z=async(o,e={})=>{var p,d,f,m;let{prompt:r,content:a,root:t,isDetails:i,isEscapable:l,escapeListener:s}=o;if(t.dataset[k]!==void 0&&!e.isIgnoreLockDuration)return;r.status=h(g({},x),{isOpen:!0,willHide:!0}),(p=e.willHide)==null||p.call(e,o),(d=e.getStatus)==null||d.call(e,r.status),delete t.dataset[L];let n=N(a);await R(n),i&&t.removeAttribute("open"),a.tagName=="DIALOG"&&(a.close(),y(a)),r.status=h(g({},x),{didHide:!0}),(f=e.getStatus)==null||f.call(e,r.status),(m=e.didHide)==null||m.call(e,o),l&&typeof window<"u"&&window.removeEventListener("keydown",s)},$=async(o,e={})=>{var f,m,u,b;let{prompt:r,content:a,root:t,isDetails:i,isEscapable:l,isFocusFirst:s,focusFirstSelector:n,escapeListener:p}=o;if(t.dataset[k]!==void 0)return;t.dataset[k]="",setTimeout(()=>{t&&delete t.dataset[k]},eo),l&&typeof window<"u"&&window.addEventListener("keydown",p),i&&(t.setAttribute("open",""),y(t)),t.dataset[L]="",y(t),r.status=h(g({},x),{willShow:!0}),(f=e.willShow)==null||f.call(e,o),(m=e.getStatus)==null||m.call(e,r.status);let d=N(a);if(await R(d),s){let c=_(a);c&&c.focus()}else if(n){let c=a.querySelector(n);c&&c.focus()}r.status=h(g({},x),{didShow:!0,isOpen:!0}),(u=e.didShow)==null||u.call(e,o),(b=e.getStatus)==null||b.call(e,r.status)},S=async(o,e=2,r)=>{switch(e){case 0:return await $(o,r);case 1:return await z(o,r);default:return E(o.content)?await z(o,r):await $(o,r)}},ro=(o,e,r,a)=>{let t=null;if(!r&&e?t=e:typeof r=="string"?t=document.querySelector(r):r&&r.tagName&&(t=r.closest(M)),!t){console.error("Prompt element 'data-prompt' not found");return}let i=t.querySelector(Y);if(!i){console.error("Prompt element 'data-content' not found");return}let l=t.querySelector(Q)||t.querySelector("summary"),s=t.querySelector(V),n=t.querySelector(X),p=t.tagName==="DETAILS",d=t.dataset[J]!==void 0,f=t.dataset[q]!==void 0,m=t.dataset[K]!==void 0,u=t.dataset[oo],b={prompt:o,root:t,isDetails:p,isModal:d,isEscapable:f,isFocusFirst:m,focusFirstSelector:u,toggle:l,content:i,touchLayer:s,backdropLayer:n,escapeListener:function(c){c.key==="Escape"&&[].slice.call(document.querySelectorAll("".concat(M,"[data-").concat(L,"]"))).reverse()[0]===b.root&&z(b,h(g({},a),{isIgnoreLockDuration:!0}))},clickTouchLayerListener:function(c){c.target===s&&(d||S(b,1,a))},clickToggleListener:function(c){c.preventDefault(),c.stopPropagation(),S(b,void 0,a)}};return b},to=o=>{let{toggle:e,clickToggleListener:r}=o;e&&e.dataset.registered!==""&&(e.addEventListener("click",r),e.dataset.registered="")},ao=o=>{let{clickTouchLayerListener:e,touchLayer:r}=o;r&&r.dataset.registered!==""&&(r.addEventListener("click",e),r.dataset.registered="")};async function v(o,e,r,a){o.options=g(g({},o.options),r);let t=ro(o,o.el,e,o.options);if(t===void 0)return;o.el||(o.el=t==null?void 0:t.root);let{root:i,content:l,isDetails:s,backdropLayer:n}=t;r!=null&&r.transitionDuration&&(l.style.setProperty("--prompt-transition-duration-content","".concat(r.transitionDuration,"ms")),l.style.setProperty("--prompt-fast-transition-duration-content","".concat(r.transitionDuration,"ms")),n&&(n.style.setProperty("--prompt-transition-duration-backdrop","".concat(r.transitionDuration,"ms")),n.style.setProperty("--prompt-fast-transition-duration-backdrop","".concat(r.transitionDuration,"ms")))),l.tagName=="DIALOG"&&(l.show(),y(l)),to(t),ao(t),s&&i.getAttribute("open")!==null&&a!==1&&$(t,o.options),a!==void 0&&await S(t,a,o.options)}var w={_cache:{},mounted(){},beforeUpdate(){var o,e;Z(this._cache,(o=this.el)==null?void 0:o.id,(e=this.el)==null?void 0:e.dataset)},updated(){var e,r;let o=U(this._cache,(e=this.el)==null?void 0:e.id);H(o,this.el),j(this._cache,(r=this.el)==null?void 0:r.id)},destroyed(){var o;j(this._cache,(o=this.el)==null?void 0:o.id)},status:x,async init(o,e){await v(this,o,e)},async toggle(o,e){await v(this,o,e,2)},async show(o,e){await v(this,o,e,0)},async hide(o,e){await v(this,o,e,1)}};typeof window<"u"&&(window.Prompt=w);function co(o){let e=o.target;if(!(e instanceof HTMLElement))return;let r={show:w.show,hide:w.hide},a=o.detail.action,i={transitionDuration:o.detail.transitionDuration};a&&r[a](e,i)}window.addEventListener("prompt:toggle",co);})();
