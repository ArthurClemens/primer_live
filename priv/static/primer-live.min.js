"use strict";(()=>{var T={mounted(){window.addEventListener("phx:pl-session",e=>fetch(`/api/pl-session?payload=${JSON.stringify(e.detail)}`,{method:"post"}))}};window.Session=T;var s="[data-prompt]",M="[data-prompt-content]",c="[data-content]",L="[data-touch]",d='input[type="checkbox"]',y="label",H="ismounted",b="touch",S="ismodal",g="isescapable",w="focusfirst",p=e=>(e==null?void 0:e.dataset[b])!==void 0,f=e=>(e==null?void 0:e.dataset[S])!==void 0,P=e=>(e==null?void 0:e.dataset[g])!==void 0;function h(e){let n=e==null?void 0:e.closest(s);if(!n)return null;let t=n.querySelector(d);return t||null}function m(e){let n=null;if(typeof e=="string"){let t=document.querySelector(e);t&&(n=t.querySelector(d))}else n=h(e);return n}function k(e){let n=e.closest(s);if(!n)throw new Error(`Prompt element ${s} not found`);let t=(n==null?void 0:n.querySelector(M))||null;if(!t)throw new Error("Prompt element 'data-prompt-content' not found");let o=t==null?void 0:t.querySelector(c);if(!o)throw new Error(`Prompt element ${c} not found`);let i=(t==null?void 0:t.querySelector(L))||null,r=(n==null?void 0:n.querySelector(y))||null;return{root:n,touchLayer:i,content:o,toggle:r}}function a({checkbox:e,state:n,elements:t,options:o,onEndShowing:i}){switch(n){case"showing":delete e.dataset.ishiding,o.willShow&&o.willShow(t);break;case"endShowing":i&&i(t),o.didShow&&o.didShow(t);break;case"hiding":e.checked=!1,e.dataset.ishiding="true",o.willHide&&o.willHide(t);break;case"endHiding":delete e.dataset.ishiding,o.didHide&&o.didHide(t);break;default:break}}function u(e){var o;if(!e.target)return;let n=e.target;if(n&&n instanceof HTMLElement&&!p(n))return;let t=n.closest(s);t&&t instanceof HTMLElement&&f(t)||(o=m(n))==null||o.click()}function C(e){if(e.key==="Escape"){let t=Array.from(document.querySelectorAll(`${s} > ${d}:checked`)).reverse()[0];if(t instanceof HTMLElement){let o=t.closest(s);P(o)&&t.click()}}}function x({root:e}){let n=e.querySelector(c);n&&v(e,n)}function v(e,n){let t=e.dataset[w];if(t){let o=n.querySelector(t);o&&o.focus()}}function E(e,n){let t=m(e);t&&(n&&(t.options=n),t.click())}var l={isInited:!1,init:function(){let e=h(this.el||void 0);e&&(e.dataset[H]="true"),l.isInited||(window.addEventListener("keydown",C),l.isInited=!0)},mounted:function(){this.init()},updated:function(){this.init()},change:function(e,n={}){var i,r;let t=m(e);if(!t||!(t instanceof HTMLInputElement))return;let o=k(t);t.checked?(i=o.touchLayer)==null||i.addEventListener("click",u):(r=o.touchLayer)==null||r.removeEventListener("click",u),t.addEventListener("transitionend",function(O){a({checkbox:t,state:t.checked?"endShowing":"endHiding",elements:o,options:n,onEndShowing:x})},{once:!0}),a({checkbox:t,state:t.checked?"showing":"hiding",elements:o,options:n})},hide:function(e){if(typeof e!="string"){let n=e,t=n.closest(s);if(p(n)&&f(t))return}E(e)},show:E};typeof window<"u"&&(window.Prompt=l);})();
