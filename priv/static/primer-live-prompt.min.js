"use strict";(()=>{var r="[data-prompt]",b="[data-prompt-content]",c="[data-content]",k="[data-touch]",m='input[type="checkbox"]',y="label",g="ismounted",E="touch",T="ismodal",v="isescapable",L="isshowonmount",x="focusfirst",w=t=>(t==null?void 0:t.dataset[E])!==void 0,u=t=>(t==null?void 0:t.dataset[T])!==void 0,M=t=>!u(t)||(t==null?void 0:t.dataset[v])!==void 0,P=t=>(t==null?void 0:t.dataset[L])!==void 0;function H(t){let e=t==null?void 0:t.closest(r);if(!e)return null;let a=e.querySelector(m);return a||null}function i(t){let e=null;if(typeof t=="string"){let a=document.querySelector(t);a&&(e=a.querySelector(m))}else e=H(t);return e}function S(t){let e=t.closest(r);if(!e)throw new Error("Prompt element ".concat(r," not found"));let a=(e==null?void 0:e.querySelector(b))||null;if(!a)throw new Error("Prompt element 'data-prompt-content' not found");let n=a==null?void 0:a.querySelector(c);if(!n)throw new Error("Prompt element ".concat(c," not found"));let o=(a==null?void 0:a.querySelector(k))||null,p=(e==null?void 0:e.querySelector(y))||null;return{root:e,touchLayer:o,content:n,toggle:p}}function l({checkbox:t,state:e,elements:a,options:n,onDidShow:o}){switch(e){case"showing":delete t.dataset.ishiding,n.willShow&&n.willShow(a);break;case"endShowing":o&&o(a),n.didShow&&n.didShow(a);break;case"hiding":t.checked=!1,t.dataset.ishiding="true",n.willHide&&n.willHide(a);break;case"endHiding":delete t.dataset.ishiding,n.didHide&&n.didHide(a);break;default:break}}function h(t){var n;if(!t.target)return;let e=t.target;if(e&&e instanceof HTMLElement&&!w(e))return;let a=e.closest(r);a&&a instanceof HTMLElement&&u(a)||(n=i(e))==null||n.click()}function C(t){if(t.key==="Escape"){let a=Array.from(document.querySelectorAll("".concat(r," > ").concat(m,":checked"))).reverse()[0];if(a instanceof HTMLElement){let n=a.closest(r);M(n)&&a.click()}}}function O({root:t}){let e=t.querySelector(c);e&&R(t,e)}function R(t,e){let a=t.dataset[x];if(a){let n=e.querySelector(a);n&&n.focus()}}function s(t,e,a){let n=i(t);if(n){if(n.checked&&e==="show"||!n.checked&&e==="hide")return;a&&(n.options=a),n.click()}}function f(t){let e=t.target;if(!(e instanceof HTMLElement))return;let a=i(e);if(!a||!(a instanceof HTMLInputElement))return;let n={show:d.show,hide:d.hide},o=t.detail.action;o&&setTimeout(()=>{n[o](e)},0)}var d={isInited:!1,init:function(t){if(!this.el)return;let e=i(this.el);e&&(e.dataset[g]="true"),t&&(window.addEventListener("keydown",C),this.el.addEventListener("prompt:toggle",f),P(this.el)&&d.show(this.el),d.isInited=!0)},mounted:function(){this.init(!0)},updated:function(){this.init()},destroyed:function(){var t;(t=this.el)==null||t.removeEventListener("prompt:toggle",f)},change:function(t,e={}){var o,p;let a=i(t);if(!a||!(a instanceof HTMLInputElement))return;let n=S(a);a.checked?(o=n.touchLayer)==null||o.addEventListener("click",h):(p=n.touchLayer)==null||p.removeEventListener("click",h),a.addEventListener("transitionend",function(A){l({checkbox:a,state:a.checked?"endShowing":"endHiding",elements:n,options:e,onDidShow:O})},{once:!0}),l({checkbox:a,state:a.checked?"showing":"hiding",elements:n,options:e})},hide:function(t){if(typeof t!="string"){let e=t,a=e.closest(r);if(w(e)&&u(a))return}s(t,"hide")},show:function(t){s(t,"show")},toggle:function(t){s(t,"toggle")}};typeof window<"u"&&(window.Prompt=d);})();
