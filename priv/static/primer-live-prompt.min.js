"use strict";(()=>{var r="[data-prompt]",b="[data-prompt-content]",c="[data-content]",k="[data-touch]",m='input[type="checkbox"]',y="label",g="ismounted",E="touch",T="ismodal",v="isescapable",L="focusfirst",f=t=>(t==null?void 0:t.dataset[E])!==void 0,w=t=>(t==null?void 0:t.dataset[T])!==void 0,x=t=>(t==null?void 0:t.dataset[v])!==void 0;function M(t){let e=t==null?void 0:t.closest(r);if(!e)return null;let a=e.querySelector(m);return a||null}function p(t){let e=null;if(typeof t=="string"){let a=document.querySelector(t);a&&(e=a.querySelector(m))}else e=M(t);return e}function P(t){let e=t.closest(r);if(!e)throw new Error("Prompt element ".concat(r," not found"));let a=(e==null?void 0:e.querySelector(b))||null;if(!a)throw new Error("Prompt element 'data-prompt-content' not found");let n=a==null?void 0:a.querySelector(c);if(!n)throw new Error("Prompt element ".concat(c," not found"));let o=(a==null?void 0:a.querySelector(k))||null,i=(e==null?void 0:e.querySelector(y))||null;return{root:e,touchLayer:o,content:n,toggle:i}}function u({checkbox:t,state:e,elements:a,options:n,onDidShow:o}){switch(t.dataset[g]="true",e){case"showing":delete t.dataset.ishiding,n.willShow&&n.willShow(a);break;case"endShowing":o&&o(a),n.didShow&&n.didShow(a);break;case"hiding":t.checked=!1,t.dataset.ishiding="true",n.willHide&&n.willHide(a);break;case"endHiding":delete t.dataset.ishiding,n.didHide&&n.didHide(a);break;default:break}}function l(t){var n;if(!t.target)return;let e=t.target;if(e&&e instanceof HTMLElement&&!f(e))return;let a=e.closest(r);a&&a instanceof HTMLElement&&w(a)||(n=p(e))==null||n.click()}function H(t){if(t.key==="Escape"){let a=Array.from(document.querySelectorAll("".concat(r," > ").concat(m,":checked"))).reverse()[0];if(a instanceof HTMLElement){let n=a.closest(r);x(n)&&a.click()}}}function S({root:t}){let e=t.querySelector(c);e&&C(t,e)}function C(t,e){let a=t.dataset[L];if(a){let n=e.querySelector(a);n&&n.focus()}}function s(t,e,a){let n=p(t);if(n){if(n.checked&&e==="show"||!n.checked&&e==="hide")return;a&&(n.options=a),n.click()}}function h(t){let e=t.target;if(!(e instanceof HTMLElement))return;let a=p(e);if(!a||!(a instanceof HTMLInputElement))return;let n={show:d.show,hide:d.hide},o=t.detail.action;o&&setTimeout(()=>{n[o](e)},0)}var d={isInited:!1,init:function(t){this.el&&t&&(window.addEventListener("keydown",H),this.el.addEventListener("prompt:toggle",h),d.isInited=!0)},mounted:function(){this.init(!0)},updated:function(){this.init()},destroyed:function(){var t;(t=this.el)==null||t.removeEventListener("prompt:toggle",h)},change:function(t,e={}){var o,i;let a=p(t);if(!a||!(a instanceof HTMLInputElement))return;let n=P(a);a.checked?(o=n.touchLayer)==null||o.addEventListener("click",l):(i=n.touchLayer)==null||i.removeEventListener("click",l),a.addEventListener("transitionend",function(O){u({checkbox:a,state:a.checked?"endShowing":"endHiding",elements:n,options:e,onDidShow:S})},{once:!0}),u({checkbox:a,state:a.checked?"showing":"hiding",elements:n,options:e})},hide:function(t){if(typeof t!="string"){let e=t,a=e.closest(r);if(f(e)&&w(a))return}s(t,"hide")},show:function(t){s(t,"show")},toggle:function(t){s(t,"toggle")}};typeof window<"u"&&(window.Prompt=d);})();
