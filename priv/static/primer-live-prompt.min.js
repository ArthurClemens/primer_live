"use strict";(()=>{var P=Object.defineProperty,z=Object.defineProperties;var N=Object.getOwnPropertyDescriptors;var D=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable;var A=(t,a,r)=>a in t?P(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,l=(t,a)=>{for(var r in a||(a={}))V.call(a,r)&&A(t,r,a[r]);if(D)for(var r of D(a))X.call(a,r)&&A(t,r,a[r]);return t},h=(t,a)=>z(t,N(a));var F=t=>new Promise(a=>setTimeout(a,t)),R=(t,a)=>a.reduce((r,i)=>r!=="0s"?r:t.getPropertyValue(i),"0s"),O=({domElement:t,props:a})=>{let r=document.defaultView;if(r){let i=r.getComputedStyle(t);if(i)return R(i,a)}},_=t=>{let a=parseFloat(t)*(t.indexOf("ms")===-1?1e3:1);return Number.isNaN(a)?0:a},H=t=>{let a=O({domElement:t,props:["animation-duration","transition-duration"]}),r=a!==void 0?_(a):0,i=O({domElement:t,props:["animation-delay","transition-delay"]}),e=i!==void 0?_(i):0;return r+e},k=t=>t.scrollTop,M=t=>{let a=typeof window<"u"?window.getComputedStyle(t):{};return a.opacity==="0"||a.display==="none"?!1:!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},q=(t,a)=>t instanceof HTMLAnchorElement&&t.rel!=="ignore"||t instanceof HTMLAreaElement&&t.href!==void 0||[HTMLInputElement,HTMLSelectElement,HTMLTextAreaElement,HTMLButtonElement].some(r=>t instanceof r)&&!t.disabled||t instanceof HTMLIFrameElement||t.tabIndex>0||!a&&t.tabIndex===0&&t.getAttribute("tabindex")!==null&&t.getAttribute("aria-hidden")!=="true",U=t=>[].slice.call(t.querySelectorAll("button, [href], input, select, textarea, [tabindex]:not([tabindex='-1'])")).filter(r=>q(r,!0)).sort((r,i)=>r.tabIndex-i.tabIndex)[0],$=(t,a,r)=>{a&&(t[a]||(t[a]=JSON.stringify(r)))},G=(t,a)=>{if(a)return JSON.parse(t[a])},I=(t,a)=>{a&&delete t[a]},B=(t,a)=>{!a||!t||Object.keys(t).forEach(r=>{a.dataset[r]=t[r]})},C="[data-prompt]",K="[data-content]",J="[data-touch]",j="[data-backdrop]",W="[data-toggle]",Y="ismodal",Q="isescapable",Z="isfocusfirst",tt="focusfirst",x="isopen",b="islocked",at=300,v={isOpen:!1,willShow:!1,didShow:!1,willHide:!1,didHide:!1},T=async(t,a={})=>{var f,c,m,w;let{prompt:r,content:i,root:e,isDetails:d,isEscapable:o,escapeListener:p}=t;if(e.dataset[b]!==void 0&&!a.isIgnoreLockDuration)return;r.status=h(l({},v),{isOpen:!0,willHide:!0}),(f=a.willHide)==null||f.call(a,t),(c=a.getStatus)==null||c.call(a,r.status),delete e.dataset[x];let s=H(i);await F(s),d&&e.removeAttribute("open"),i.tagName=="DIALOG"&&(i.close(),k(i)),r.status=h(l({},v),{didHide:!0}),(m=a.getStatus)==null||m.call(a,r.status),(w=a.didHide)==null||w.call(a,t),o&&typeof window<"u"&&window.removeEventListener("keydown",p)},E=async(t,a={})=>{var m,w,g,u;let{prompt:r,content:i,root:e,isDetails:d,isEscapable:o,isFocusFirst:p,focusFirstSelector:s,escapeListener:f}=t;if(e.dataset[b]!==void 0)return;e.dataset[b]="",setTimeout(()=>{e&&delete e.dataset[b]},at),o&&typeof window<"u"&&window.addEventListener("keydown",f),d&&(e.setAttribute("open",""),k(e)),e.dataset[x]="",k(e),r.status=h(l({},v),{willShow:!0}),(m=a.willShow)==null||m.call(a,t),(w=a.getStatus)==null||w.call(a,r.status);let c=H(i);if(await F(c),p){let n=U(i);n&&n.focus()}else if(s){let n=i.querySelector(s);n&&n.focus()}r.status=h(l({},v),{didShow:!0,isOpen:!0}),(g=a.didShow)==null||g.call(a,t),(u=a.getStatus)==null||u.call(a,r.status)},L=async(t,a=2,r)=>{switch(a){case 0:return await E(t,r);case 1:return await T(t,r);default:return M(t.content)?await T(t,r):await E(t,r)}},rt=(t,a,r,i)=>{let e=null;if(!r&&a?e=a:typeof r=="string"?e=document.querySelector(r):r&&r.tagName&&(e=r.closest(C)),!e){console.error("Prompt element 'data-prompt' not found");return}let d=e.querySelector(K);if(!d){console.error("Prompt element 'data-content' not found");return}let o=e.querySelector(W)||e.querySelector("summary"),p=e.querySelector(J),s=e.querySelector(j),f=e.tagName==="DETAILS",c=e.dataset[Y]!==void 0,m=e.dataset[Q]!==void 0,w=e.dataset[Z]!==void 0,g=e.dataset[tt],u={prompt:t,root:e,isDetails:f,isModal:c,isEscapable:m,isFocusFirst:w,focusFirstSelector:g,toggle:o,content:d,touchLayer:p,backdropLayer:s,escapeListener:function(n){n.key==="Escape"&&[].slice.call(document.querySelectorAll("".concat(C,"[data-").concat(x,"]"))).reverse()[0]===u.root&&T(u,h(l({},i),{isIgnoreLockDuration:!0}))},clickTouchLayerListener:function(n){n.target===p&&(c||L(u,1,i))},clickToggleListener:function(n){n.preventDefault(),n.stopPropagation(),L(u,void 0,i)}};return u},et=t=>{let{toggle:a,clickToggleListener:r}=t;a&&a.dataset.registered!==""&&(a.addEventListener("click",r),a.dataset.registered="")},it=t=>{let{clickTouchLayerListener:a,touchLayer:r}=t;r&&r.dataset.registered!==""&&(r.addEventListener("click",a),r.dataset.registered="")};async function y(t,a,r,i){t.options=l(l({},t.options),r);let e=rt(t,t.el,a,t.options);if(e===void 0)return;t.el||(t.el=e==null?void 0:e.root);let{root:d,content:o,isDetails:p,backdropLayer:s}=e;r!=null&&r.transitionDuration&&(o.style.setProperty("--prompt-transition-duration-content","".concat(r.transitionDuration,"ms")),o.style.setProperty("--prompt-fast-transition-duration-content","".concat(r.transitionDuration,"ms")),s&&(s.style.setProperty("--prompt-transition-duration-backdrop","".concat(r.transitionDuration,"ms")),s.style.setProperty("--prompt-fast-transition-duration-backdrop","".concat(r.transitionDuration,"ms")))),o.tagName=="DIALOG"&&(o.show(),k(o)),et(e),it(e),p&&d.getAttribute("open")!==null&&i!==1&&E(e,t.options),i!==void 0&&await L(e,i,t.options)}var S={_cache:{},mounted(){},beforeUpdate(){var t,a;$(this._cache,(t=this.el)==null?void 0:t.id,(a=this.el)==null?void 0:a.dataset)},updated(){var a,r;let t=G(this._cache,(a=this.el)==null?void 0:a.id);B(t,this.el),I(this._cache,(r=this.el)==null?void 0:r.id)},destroyed(){var t;I(this._cache,(t=this.el)==null?void 0:t.id)},status:v,async init(t,a){await y(this,t,a)},async toggle(t,a){await y(this,t,a,2)},async show(t,a){await y(this,t,a,0)},async hide(t,a){await y(this,t,a,1)}};typeof window<"u"&&(window.Prompt=S);function nt(t){let a=t.target;if(!(a instanceof HTMLElement))return;let r={show:S.show,hide:S.hide},i=t.detail.action,d={transitionDuration:t.detail.transitionDuration};i&&r[i](a,d)}window.addEventListener("prompt:toggle",nt);})();
